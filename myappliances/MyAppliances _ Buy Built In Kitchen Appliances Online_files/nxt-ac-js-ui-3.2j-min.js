(function(b,d){if(b.cleanData){var c=b.cleanData;b.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{b(h).triggerHandler("remove")}catch(j){}}c(f)}}else{var a=b.fn.remove;b.fn.remove=function(e,f){return this.each(function(){if(!f){if(!e||b.filter(e,[this]).length){b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(g){}})}}return a.call(b(this),e,f)})}}b.widget=function(f,h,e){var g=f.split(".")[0],j;f=f.split(".")[1];j=g+"-"+f;if(!e){e=h;h=b.Widget}b.expr[":"][j]=function(k){return !!b.data(k,f)};b[g]=b[g]||{};b[g][f]=function(k,l){if(arguments.length){this._createWidget(k,l)}};var i=new h();i.options=b.extend(true,{},i.options);b[g][f].prototype=b.extend(true,i,{namespace:g,widgetName:f,widgetEventPrefix:b[g][f].prototype.widgetEventPrefix||f,widgetBaseClass:j},e);b.widget.bridge(f,b[g][f])};b.widget.bridge=function(f,e){b.fn[f]=function(i){var g=typeof i==="string",h=Array.prototype.slice.call(arguments,1),j=this;i=!g&&h.length?b.extend.apply(null,[true,i].concat(h)):i;if(g&&i.charAt(0)==="_"){return j}if(g){this.each(function(){var k=b.data(this,f),l=k&&b.isFunction(k[i])?k[i].apply(k,h):k;if(l!==k&&l!==d){j=l;return false}})}else{this.each(function(){var k=b.data(this,f);if(k){k.option(i||{})._init()}else{b.data(this,f,new e(i,this))}})}return j}};b.Widget=function(e,f){if(arguments.length){this._createWidget(e,f)}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(f,g){b.data(g,this.widgetName,this);this.element=b(g);this.options=b.extend(true,{},this.options,this._getCreateOptions(),f);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(f,g){var e=f;if(arguments.length===0){return b.extend({},this.options)}if(typeof f==="string"){if(g===d){return this.options[f]}e={};e[f]=g}this._setOptions(e);return this},_setOptions:function(f){var e=this;b.each(f,function(g,h){e._setOption(g,h)});return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled"){this.widget()[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",f)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(f,g,h){var k=this.options[f];g=b.Event(g);g.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();h=h||{};if(g.originalEvent){for(var e=b.event.props.length,j;e;){j=b.event.props[--e];g[j]=g.originalEvent[j]}}this.element.trigger(g,h);return !(b.isFunction(k)&&k.call(this.element[0],g,h)===false||g.isDefaultPrevented())}}})(jnxtac);
(function(f,g){f.ui=f.ui||{};var d=/left|center|right/,e=/top|center|bottom/,a="center",b=f.fn.position,c=f.fn.offset;f.fn.position=function(i){if(!i||!i.of){return b.apply(this,arguments)}i=f.extend({},i);var m=f(i.of),l=m[0],o=(i.collision||"flip").split(" "),n=i.offset?i.offset.split(" "):[0,0],k,h,j;if(l.nodeType===9){k=m.width();h=m.height();j={top:0,left:0}}else{if(l.setTimeout){k=m.width();h=m.height();j={top:m.scrollTop(),left:m.scrollLeft()}}else{if(l.preventDefault){i.at="left top";k=h=0;j={top:i.of.pageY,left:i.of.pageX}}else{k=m.outerWidth();h=m.outerHeight();j=m.offset()}}}f.each(["my","at"],function(){var p=(i[this]||"").split(" ");if(p.length===1){p=d.test(p[0])?p.concat([a]):e.test(p[0])?[a].concat(p):[a,a]}p[0]=d.test(p[0])?p[0]:a;p[1]=e.test(p[1])?p[1]:a;i[this]=p});if(o.length===1){o[1]=o[0]}n[0]=parseInt(n[0],10)||0;if(n.length===1){n[1]=n[0]}n[1]=parseInt(n[1],10)||0;if(i.at[0]==="right"){j.left+=k}else{if(i.at[0]===a){j.left+=k/2}}if(i.at[1]==="bottom"){j.top+=h}else{if(i.at[1]===a){j.top+=h/2}}j.left+=n[0];j.top+=n[1];return this.each(function(){var s=f(this),u=s.outerWidth(),r=s.outerHeight(),t=parseInt(f.curCSS(this,"marginLeft",true))||0,q=parseInt(f.curCSS(this,"marginTop",true))||0,w=u+t+(parseInt(f.curCSS(this,"marginRight",true))||0),x=r+q+(parseInt(f.curCSS(this,"marginBottom",true))||0),v=f.extend({},j),p;if(i.my[0]==="right"){v.left-=u}else{if(i.my[0]===a){v.left-=u/2}}if(i.my[1]==="bottom"){v.top-=r}else{if(i.my[1]===a){v.top-=r/2}}v.left=Math.round(v.left);v.top=Math.round(v.top);p={left:v.left-t,top:v.top-q};f.each(["left","top"],function(z,y){if(f.ui.position[o[z]]){f.ui.position[o[z]][y](v,{targetWidth:k,targetHeight:h,elemWidth:u,elemHeight:r,collisionPosition:p,collisionWidth:w,collisionHeight:x,offset:n,my:i.my,at:i.at})}});if(f.fn.bgiframe){s.bgiframe()}s.offset(f.extend(v,{using:i.using}))})};f.ui.position={fit:{left:function(h,i){var k=f(window),j=i.collisionPosition.left+i.collisionWidth-k.width()-k.scrollLeft();h.left=j>0?h.left-j:Math.max(h.left-i.collisionPosition.left,h.left)},top:function(h,i){var k=f(window),j=i.collisionPosition.top+i.collisionHeight-k.height()-k.scrollTop();h.top=j>0?h.top-j:Math.max(h.top-i.collisionPosition.top,h.top)}},flip:{left:function(i,k){if(k.at[0]===a){return}var m=f(window),l=k.collisionPosition.left+k.collisionWidth-m.width()-m.scrollLeft(),h=k.my[0]==="left"?-k.elemWidth:k.my[0]==="right"?k.elemWidth:0,j=k.at[0]==="left"?k.targetWidth:-k.targetWidth,n=-2*k.offset[0];i.left+=k.collisionPosition.left<0?h+j+n:l>0?h+j+n:0},top:function(i,k){if(k.at[1]===a){return}var m=f(window),l=k.collisionPosition.top+k.collisionHeight-m.height()-m.scrollTop(),h=k.my[1]==="top"?-k.elemHeight:k.my[1]==="bottom"?k.elemHeight:0,j=k.at[1]==="top"?k.targetHeight:-k.targetHeight,n=-2*k.offset[1];i.top+=k.collisionPosition.top<0?h+j+n:l>0?h+j+n:0}}};if(!f.offset.setOffset){f.offset.setOffset=function(l,i){if(/static/.test(f.curCSS(l,"position"))){l.style.position="relative"}var k=f(l),n=k.offset(),h=parseInt(f.curCSS(l,"top",true),10)||0,m=parseInt(f.curCSS(l,"left",true),10)||0,j={top:(i.top-n.top)+h,left:(i.left-n.left)+m};if("using" in i){i.using.call(l,j)}else{k.css(j)}};f.fn.offset=function(h){var i=this[0];if(!i||!i.ownerDocument){return null}if(h){return this.each(function(){f.offset.setOffset(this,h)})}return c.call(this)}}}(jnxtac));
(function(a){a.widget("ui.nxt_autocomplete",{options:{cid:"",minLength:1,delay:300,captureSearches:false,footer:'<div style="text-align:center;border-top:1px solid #ddd;"><a target="_blank" href="http://www.nextopia.com"><img border="0" src="//d2brc35ftammet.cloudfront.net/autocomplete/autocomplete-powered-by-nextopiav1.gif"></a></div>'},_create:function(){var b=this;this.lastSearch="";this.overContainer=false;this.selectedItem=null;this.element.attr("autocomplete","off").bind("keydown.nxt_autocomplete",function(c){switch(c.which){case 38:c.preventDefault();b._move("up");break;case 40:c.preventDefault();b._move("down");break;case 16:case 17:case 18:break;case 9:case 13:if(b.selectedItem==null){return}else{c.preventDefault();b._select(c,b.selectedItem)}break;case 27:b._close();break;default:clearTimeout(b.searching);b.searching=setTimeout(function(){b._search()},b.options.delay);break}}).bind("blur.nxt_autocomplete",function(){if(b.overContainer==false){b._close()}});this.ac_main_container=a('<div class="nxt-ac-main"></div>').appendTo("body",this.element[0].ownerDocument).css("z-index",this._getZIndex()+1).click(function(c){b._select(c,b.selectedItem);b.element.focus()}).hover(function(){b.overContainer=true},function(){b.overContainer=false}).on("mouseenter",".nxt-ac-item",function(){b._highlight(a(this))}).on("mouseleave",".nxt-ac-item",function(){b._highlight(null)});if(this.options.captureSearches===true){this._bindingToCaptureSearches()}this._close()},_bindingToCaptureSearches:function(){var b=this;b.element.closest("form").bind("submit.nxt_autocomplete",function(d){var c=this;a(c).unbind("submit.nxt_autocomplete");d.preventDefault();b._logACUsage(-1,"",function(){c.submit()})})},_search:function(){var b=this;var c=a.trim(this.element.val());if(c.length<this.options.minLength||this.element.val()==this.lastSearch){this._close()}else{this.lastSearch=this.element.val();a.ajax({url:(("https:"==document.location.protocol)?"https://":"http://")+"vector.nextopiasoftware.com/return_autocomplete_jsonp_v3.php",dataType:"jsonp",data:{q:this.element.val(),cid:this.options.cid},success:function(d){b._renderAutocomplete(d)}})}},_renderAutocomplete:function(e){var d=this;this._close();if(a.isEmptyObject(e)==false){var b=0;for(var i in e){if(e[i]!==undefined){if(i=="banner"){var f=a('<div class="nxt-ac-banner"></div>').append(e[i][0])}else{var c=new Array();var h=e[i].n;switch(i){case"products":var g="nxt-ac-"+i+"-container";a.each(e[i].r,function(j,k){c[j]={data:k,content:d._drawProduct(k)}});break;default:var g="nxt-ac-section-container nxt-ac-sub-"+i;a.each(e[i].r,function(j,k){c[j]={data:k,content:d._drawSection(i,k)}})}var f=a('<div class="'+g+'"></div>').append('<div class="nxt-ac-header">'+h+"</div>");a.each(c,function(k,j){a('<div class="nxt-ac-item"></div>').data("nxt-autocomplete.item",j.data).data("nxt-autocomplete.type",i).data("nxt-autocomplete.item_num",b).append(j.content).appendTo(f);b++})}this.ac_main_container.append(f)}}this.ac_main_container.append(this.options.footer).show();this._setPosition()}},_drawProduct:function(b){if("https:"==document.location.protocol&&b.Image.substr(0,6)!="https:"){b.Image="https:"+b.Image.substr(5)}return'<img height="50" width="50" src="'+b.Image+'"/> <span class="nxt-item-txt">'+this._encapsulateMatches(b.Name)+"</span>"},_determineSectionType:function(c,b){if(typeof b=="string"){return"simple"}if(b.html!=undefined){return"html"}return"normal"},_drawSection:function(c,b){switch(this._determineSectionType(c,b)){case"simple":return this._drawSimpleSection(c,b);break;case"html":return this._drawHTMLSection(c,b);break;case"normal":return this._drawNormalSection(c,b);break}},_drawSimpleSection:function(c,b){return'<span class="nxt-item-txt">'+this._encapsulateMatches(b)+"</span>"},_drawHTMLSection:function(c,b){return b.html},_drawNormalSection:function(c,b){var d="";if(b.image!=undefined){if("https:"==document.location.protocol&&b.image.substr(0,6)!="https:"){b.image="https:"+b.image.substr(5)}d+='<img src="'+b.image+'"/> '}return d+'<span class="nxt-item-txt">'+this._encapsulateMatches(b.matched)+"</span>"},_encapsulateMatches:function(e){var c=this.element.val().replace(/^\s*/,"").replace(/\s*$/,"").split(" ");var b=c.length;for(var d=0;d<b;d++){e=e.replace(new RegExp("(^|\\b)("+c[d].replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")","gi"),String.fromCharCode(9677)+"$1$2"+String.fromCharCode(9678))}e=e.replace(new RegExp(String.fromCharCode(9677),"g"),"<b>").replace(new RegExp(String.fromCharCode(9678),"g"),"</b>");return e},_move:function(e){var b=null;var c=this.ac_main_container.children("div").children(".nxt-ac-item");var d=null;if(this.selectedItem!=null){d=this.selectedItem.data("nxt-autocomplete.item_num")}switch(e){case"up":if(d==null||d==0){b=c.length-1}else{b=d-1}break;case"down":if(d==null||d==c.length-1){b=0}else{b=d+1}break}this._highlight(c.eq(b))},_highlight:function(b){if(this.selectedItem!=null){this.selectedItem.removeClass("nxt-ac-selected");this.selectedItem=null}if(b!=null){b.addClass("nxt-ac-selected");this.selectedItem=b}},_select:function(e,d){if(d!=null){var c=this;if(d.data("nxt-autocomplete.type")=="products"){this._logACUsage(1,d.data("nxt-autocomplete.item").Sku,function(){c._handleProductSelect(e,d)})}else{if(d.data("nxt-autocomplete.type")=="terms"){var b=0}else{var b="1"+d.data("nxt-autocomplete.type").toString().substr(1)}if(this._determineSectionType(d.data("nxt-autocomplete.type"),d.data("nxt-autocomplete.item"))=="simple"){var f=d.data("nxt-autocomplete.item")}else{var f=d.data("nxt-autocomplete.item").matched}this._logACUsage(b,f,function(){c._handleSectionSelect(e,d)})}}},_handleProductSelect:function(d,c){var b=c.data("nxt-autocomplete.item");if(b.Url!=undefined&&b.Url!=""){window.location=b.Url}else{this.element.val(b.Name)}},_handleSectionSelect:function(e,d){if(e.type=="click"){var c=a(e.target).closest("a",d);if(c.length>0){if(c.attr("href")!=undefined){return true}}}var f=d.data("nxt-autocomplete.type");var b=d.data("nxt-autocomplete.item");if(this._determineSectionType(f,b)=="simple"){this._submitForm(b)}else{if(b.url!=undefined){window.location=b.url}else{this._submitForm(b.matched)}}},_submitForm:function(b){this.element.val(b).closest("form").unbind("submit.nxt_autocomplete").submit()},_close:function(){this.selectedItem=null;clearTimeout(self.searching);this.ac_main_container.hide();this.ac_main_container.empty()},_logACUsage:function(b,c,d){a.ajax({url:(("https:"==document.location.protocol)?"https://":"http://")+"analytics.nextopia.net/acl.php?r="+Math.floor(Math.random()*200)+"&v="+escape(this.element.val())+"&w="+escape(c)+"&x="+escape(b)+"&y="+escape(this.options.cid),dataType:"jsonp",timeout:300}).always(function(){if(a.isFunction(d)){d()}})},_setPosition:function(){this.ac_main_container.position({my:"left top",at:"left bottom",of:this.element,offset:"0 0",collision:"none"})},_getZIndex:function(){var b=parseInt(a(this.element).css("z-index"));if(isNaN(b)){b=0}return b}})}(jnxtac));